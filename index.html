<!DOCTYPE html>
<html ng-app="parser">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link rel="stylesheet" href="assets/css/bootstrap.min.css" />
	</head>
	<body ng-controller="BodyController">
		<ng-include src="'assets/html/header.html'"></ng-include>
		<section class="main">
			<div class="table-responsive mt-3 p-3">
				<table class="table">
					<thead>
						<tr>
							<th class="col">Название</th>
							<th class="col">Ссылка</th>
							<th class="col-6">Требования</th>
							<th class="col-6">Задачи</th>
							<th class="col-6">Дата</th>
							<th></th>
						</tr>
					</thead>
					<tbody>
						<tr ng-repeat="item in items" ng-style="{'background' : isAlreadySeen(item.id) ? '#e9ffef' : 'none'}">
							<td>{{item.name}}</td>
							<td><a ng-click="setAlreadySeen(item.id)" href="{{item.alternate_url}}">{{item.alternate_url}}</a></td>
							<td>{{item.snippet.requirement}}</td>
							<td>{{item.snippet.responsibility}}</td>
							<td>{{item.created_at | date : 'dd-MM-yyyy HH:mm'}}</td>
							<td>
								<button
									type="button"
									class="btn btn-primary"
									data-toggle="modal"
									data-target="#exampleModalLong"
									ng-click="sendDataToModal(item)"
								>
									Создать пост
								</button>
							</td>
						</tr>
					</tbody>
				</table>
			</div>
		</section>

		<section>
			<div
				class="modal fade"
				id="exampleModalLong"
				tabindex="-1"
				role="dialog"
				aria-labelledby="exampleModalLongTitle"
				aria-hidden="true"
			>
				<div class="modal-dialog" role="document">
					<div class="modal-content">
						<div class="modal-header">
							<h5 class="modal-title" id="exampleModalLongTitle">Создание записи</h5>
							<button type="button" class="close" data-dismiss="modal" aria-label="Close">
								<span aria-hidden="true">&times;</span>
							</button>
						</div>
						<div class="modal-body">
							<form>
								<div class="form-group">
									<label for="message-text" class="col-form-label">Пост:</label>
									<textarea class="form-control" id="message-text">
										**{{post.title}}**
										[Подробнее]({{post.url}})
									</textarea
									>
								</div>
							</form>
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
							<button type="button" class="btn btn-primary">Save changes</button>
						</div>
					</div>
				</div>
			</div>
		</section>

		<ng-include src="'assets/html/footer.html'"></ng-include>

		<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js"></script>
		<script
			src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
			integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
			crossorigin="anonymous"
		></script>
		<script
			src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
			integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
			crossorigin="anonymous"
		></script>
		<script
			src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
			integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
			crossorigin="anonymous"
		></script>
		<script src="assets/js/modal.js"></script>
		<script src="assets/js/script.js"></script>
		<script src="assets/js/controllers/BodyController.js"></script>
	</body>
</html>
